@using System.Linq.Expressions
@*PasswordField *@
@*For use on the static Account/Manage pages*@

@rendermode InteractiveServer

<MudTextField T="string"
			  @bind-Value="Value"
			  name="@Name"
			  Label="@Label"
			  Variant="@Variant"
			  Required="@Required"
			  autocomplete="@Autocomplete"
			  ShrinkLabel="@ShrinkLabel"
			  InputType="@(show ? InputType.Text : InputType.Password)"
			  Adornment="Adornment.End"
			  AdornmentIcon="@(show ? Icons.Material.Filled.VisibilityOff
                                                 	 : Icons.Material.Filled.Visibility)"
			  OnAdornmentClick="ToggleShow"
			  Immediate />

@code {

	// Bound value (e.g., Input.Password or Input.ConfirmPassword)
	[Parameter]
	public string? Value { get; set; }

	[Parameter]
	public EventCallback<string?> ValueChanged { get; set; }

	// Label for the field (e.g., "Password", "Confirm Password")
	[Parameter]
	public string Label { get; set; } = "Password";


	// Common MudTextField options
	[Parameter]
	public Variant Variant { get; set; } = Variant.Outlined;

	[Parameter]
	public bool Required { get; set; } = true;

	[Parameter]
	public string? Autocomplete { get; set; } = "new-password";
	[Parameter]
	public string? Name { get; set; }

	[Parameter]
	public bool ShrinkLabel { get; set; } = true;

	private bool show;

	private Task ToggleShow()
	{
		show = !show;
		return Task.CompletedTask;
	}
}
